{"ast":null,"code":"var _jsxFileName = \"/Users/fmparantean/Desktop/mixvisual 5/src/DateHistogram/index.js\",\n  _s = $RefreshSig$();\nimport { scaleLinear, scaleBand, max, brushX, select } from 'd3';\nimport { useRef, useEffect } from 'react';\nimport { AxisBottom } from './AxisBottom';\nimport { AxisLeft } from './AxisLeft';\nimport { Marks } from './Marks';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst margin = {\n  top: 20,\n  right: 30,\n  bottom: 50,\n  left: 90\n};\nexport const DateHistogram = ({\n  data,\n  width,\n  height,\n  setBrushExtent,\n  xValue\n}) => {\n  _s();\n  const innerHeight = height - margin.top - margin.bottom;\n  const innerWidth = width - margin.left - margin.right;\n\n  // Define xScale as scaleBand for categorical days\n  const xScale = scaleBand().domain([\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"]).range([0, innerWidth]).padding(0.2); // Adjust padding as necessary\n\n  const yValue = d => d.HRV; // Use HRV for y values\n  const yScale = scaleLinear().domain([-10, max(data, yValue) || 100]) // Ensure max returns a number\n  .range([innerHeight, 0]).nice();\n\n  // Debugging logs\n  console.log(\"X Scale Domain:\", xScale.domain());\n  console.log(\"Y Scale Domain:\", yScale.domain());\n  const brushRef = useRef();\n  useEffect(() => {\n    const brush = brushX().extent([[0, 0], [innerWidth, innerHeight]]);\n    brush(select(brushRef.current));\n    brush.on('brush end', event => {\n      const selection = event.selection;\n      if (!selection) return;\n\n      // Get the selected domains\n      const selectedDays = xScale.domain().filter(day => {\n        const dayPosition = xScale(day);\n        return dayPosition >= selection[0] && dayPosition <= selection[1];\n      });\n      setBrushExtent(selectedDays); // Set the selected days as the extent\n    });\n  }, [innerWidth, innerHeight]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"rect\", {\n      width: width,\n      height: height,\n      fill: \"white\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"g\", {\n      transform: `translate(${margin.left},${margin.top})`,\n      children: [/*#__PURE__*/_jsxDEV(AxisBottom, {\n        xScale: xScale,\n        innerHeight: innerHeight + 5,\n        tickFormat: d => d // Since we are dealing with days\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(AxisLeft, {\n        yScale: yScale,\n        innerWidth: innerWidth\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Marks, {\n        data: data,\n        xScale: xScale,\n        yScale: yScale,\n        xValue: xValue // Ensure xValue returns DayOrder\n        ,\n        yValue: yValue,\n        circleRadius: 2.5\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"g\", {\n        ref: brushRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"text\", {\n        className: \"axis-label\",\n        textAnchor: \"middle\",\n        transform: `translate(${innerWidth / 2}, ${innerHeight + 35})`,\n        children: \"Days of the Week\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"text\", {\n        className: \"axis-label\",\n        textAnchor: \"middle\",\n        transform: `translate(-25, ${innerHeight / 2}) rotate(-90)`,\n        children: \"HRV Score\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n};\n_s(DateHistogram, \"ufAAn12OGFkKLLa0dZKcGlfi/hc=\");\n_c = DateHistogram;\nvar _c;\n$RefreshReg$(_c, \"DateHistogram\");","map":{"version":3,"names":["scaleLinear","scaleBand","max","brushX","select","useRef","useEffect","AxisBottom","AxisLeft","Marks","jsxDEV","_jsxDEV","Fragment","_Fragment","margin","top","right","bottom","left","DateHistogram","data","width","height","setBrushExtent","xValue","_s","innerHeight","innerWidth","xScale","domain","range","padding","yValue","d","HRV","yScale","nice","console","log","brushRef","brush","extent","current","on","event","selection","selectedDays","filter","day","dayPosition","children","fill","fileName","_jsxFileName","lineNumber","columnNumber","transform","tickFormat","circleRadius","ref","className","textAnchor","_c","$RefreshReg$"],"sources":["/Users/fmparantean/Desktop/mixvisual 5/src/DateHistogram/index.js"],"sourcesContent":["import {\n    scaleLinear,\n    scaleBand,\n    max,\n    brushX,\n    select\n  } from 'd3';\n  import { useRef, useEffect } from 'react';\n  import { AxisBottom } from './AxisBottom';\n  import { AxisLeft } from './AxisLeft';\n  import { Marks } from './Marks';\n  \n  const margin = { top: 20, right: 30, bottom: 50, left: 90 };\n  \n  export const DateHistogram = ({\n    data,\n    width,\n    height,\n    setBrushExtent,\n    xValue\n  }) => {\n    const innerHeight = height - margin.top - margin.bottom;\n    const innerWidth = width - margin.left - margin.right;\n  \n    // Define xScale as scaleBand for categorical days\n    const xScale = scaleBand()\n        .domain([\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"])\n        .range([0, innerWidth])\n        .padding(0.2); // Adjust padding as necessary\n  \n    const yValue = d => d.HRV; // Use HRV for y values\n    const yScale = scaleLinear()\n        .domain([-10, max(data, yValue) || 100]) // Ensure max returns a number\n        .range([innerHeight, 0])\n        .nice();\n  \n    // Debugging logs\n    console.log(\"X Scale Domain:\", xScale.domain());\n    console.log(\"Y Scale Domain:\", yScale.domain());\n  \n    const brushRef = useRef();\n  \n    useEffect(() => {\n        const brush = brushX().extent([[0, 0], [innerWidth, innerHeight]]);\n        brush(select(brushRef.current));\n        \n        brush.on('brush end', (event) => {\n            const selection = event.selection;\n            if (!selection) return;\n            \n            // Get the selected domains\n            const selectedDays = xScale.domain().filter(day => {\n                const dayPosition = xScale(day);\n                return dayPosition >= selection[0] && dayPosition <= selection[1];\n            });\n  \n            setBrushExtent(selectedDays); // Set the selected days as the extent\n        });\n    }, [innerWidth, innerHeight]);\n  \n    return (\n        <>\n            <rect width={width} height={height} fill=\"white\" />\n            <g transform={`translate(${margin.left},${margin.top})`}>\n                <AxisBottom\n                    xScale={xScale}\n                    innerHeight={innerHeight + 5}\n                    tickFormat={d => d} // Since we are dealing with days\n                />\n                <AxisLeft\n                    yScale={yScale}\n                    innerWidth={innerWidth}\n                />\n                <Marks\n                    data={data}\n                    xScale={xScale}\n                    yScale={yScale}\n                    xValue={xValue} // Ensure xValue returns DayOrder\n                    yValue={yValue} \n                    circleRadius={2.5}\n                />\n                <g ref={brushRef} />\n                <text\n                    className=\"axis-label\"\n                    textAnchor=\"middle\"\n                    transform={`translate(${innerWidth / 2}, ${innerHeight + 35})`}\n                >\n                    Days of the Week\n                </text>\n                <text\n                    className=\"axis-label\"\n                    textAnchor=\"middle\"\n                    transform={`translate(-25, ${innerHeight / 2}) rotate(-90)`}\n                >\n                    HRV Score\n                </text>\n            </g>\n        </>\n    );\n  };"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}