{"ast":null,"code":"var _jsxFileName = \"/Users/fmparantean/Desktop/mixvisual/src/DateHistogram/index.js\",\n  _s = $RefreshSig$();\n// DateHistogram.js\nimport { scaleLinear, scaleTime, max, timeFormat, extent, bin, timeMonths, sum, brushX, select } from 'd3';\nimport { useRef, useEffect } from 'react';\nimport { AxisBottom } from './AxisBottom';\nimport { AxisLeft } from './AxisLeft';\nimport { Marks } from './Marks';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst margin = {\n  top: 20,\n  right: 30,\n  bottom: 50,\n  left: 45\n};\nconst xAxisLabelOffset = 54;\nconst yAxisLabelOffset = 30;\nexport const DateHistogram = ({\n  data,\n  width,\n  height,\n  setBrushExtent,\n  xValue\n}) => {\n  _s();\n  const xAxisLabel = 'Time';\n  const yValue = d => d['Total Dead and Missing'];\n  const yAxisLabel = 'Total Dead and Missing';\n  const innerHeight = height - margin.top - margin.bottom;\n  const innerWidth = width - margin.left - margin.right;\n  const xAxisTickFormat = timeFormat('%m/%d/%Y');\n  const xScale = scaleTime().domain(extent(data, xValue)).range([0, innerWidth]).nice();\n  const [start, stop] = xScale.domain();\n  const binnedData = bin().value(xValue).domain(xScale.domain()).thresholds(timeMonths(start, stop))(data).map(array => ({\n    y: sum(array, yValue),\n    x0: array.x0,\n    x1: array.x1\n  })).filter(d => d.y > 0); // Only keep bins where the count is > 0\n\n  const yScale = scaleLinear().domain([0, max(binnedData, d => d.y) || 0]) // Safeguard against empty data\n  .range([innerHeight, 0]);\n  const brushRef = useRef();\n  useEffect(() => {\n    const brush = brushX().extent([[0, 0], [innerWidth, innerHeight]]);\n    brush(select(brushRef.current));\n    brush.on('brush end', event => {\n      setBrushExtent(event.selection && event.selection.map(xScale.invert));\n    });\n  }, [innerWidth, innerHeight]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"rect\", {\n      width: width,\n      height: height,\n      fill: \"white\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"g\", {\n      transform: `translate(${margin.left},${margin.top})`,\n      children: [/*#__PURE__*/_jsxDEV(AxisBottom, {\n        xScale: xScale,\n        innerHeight: innerHeight,\n        tickFormat: xAxisTickFormat,\n        tickOffset: 5\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"text\", {\n        className: \"axis-label\",\n        textAnchor: \"middle\",\n        transform: `translate(${-yAxisLabelOffset},${innerHeight / 2}) rotate(-90)`,\n        children: yAxisLabel\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(AxisLeft, {\n        yScale: yScale,\n        innerWidth: innerWidth,\n        tickOffset: 5\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"text\", {\n        className: \"axis-label\",\n        x: innerWidth / 2,\n        y: innerHeight + xAxisLabelOffset,\n        textAnchor: \"middle\",\n        children: xAxisLabel\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Marks, {\n        binnedData: binnedData,\n        xScale: xScale,\n        yScale: yScale,\n        tooltipFormat: d => d,\n        innerHeight: innerHeight\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"g\", {\n        ref: brushRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n};\n_s(DateHistogram, \"ufAAn12OGFkKLLa0dZKcGlfi/hc=\");\n_c = DateHistogram;\nvar _c;\n$RefreshReg$(_c, \"DateHistogram\");","map":{"version":3,"names":["scaleLinear","scaleTime","max","timeFormat","extent","bin","timeMonths","sum","brushX","select","useRef","useEffect","AxisBottom","AxisLeft","Marks","jsxDEV","_jsxDEV","Fragment","_Fragment","margin","top","right","bottom","left","xAxisLabelOffset","yAxisLabelOffset","DateHistogram","data","width","height","setBrushExtent","xValue","_s","xAxisLabel","yValue","d","yAxisLabel","innerHeight","innerWidth","xAxisTickFormat","xScale","domain","range","nice","start","stop","binnedData","value","thresholds","map","array","y","x0","x1","filter","yScale","brushRef","brush","current","on","event","selection","invert","children","fill","fileName","_jsxFileName","lineNumber","columnNumber","transform","tickFormat","tickOffset","className","textAnchor","x","tooltipFormat","ref","_c","$RefreshReg$"],"sources":["/Users/fmparantean/Desktop/mixvisual/src/DateHistogram/index.js"],"sourcesContent":["// DateHistogram.js\nimport {\n    scaleLinear,\n    scaleTime,\n    max,\n    timeFormat,\n    extent,\n    bin,\n    timeMonths,\n    sum,\n    brushX,\n    select\n} from 'd3';\nimport { useRef, useEffect } from 'react';\nimport { AxisBottom } from './AxisBottom';\nimport { AxisLeft } from './AxisLeft';\nimport { Marks } from './Marks';\n\nconst margin = { top: 20, right: 30, bottom: 50, left: 45 };\nconst xAxisLabelOffset = 54;\nconst yAxisLabelOffset = 30;\n\nexport const DateHistogram = ({\n    data,\n    width,\n    height,\n    setBrushExtent,\n    xValue\n}) => {\n    const xAxisLabel = 'Time';\n    const yValue = d => d['Total Dead and Missing'];\n    const yAxisLabel = 'Total Dead and Missing';\n\n    const innerHeight = height - margin.top - margin.bottom;\n    const innerWidth = width - margin.left - margin.right;\n\n    const xAxisTickFormat = timeFormat('%m/%d/%Y');\n\n    const xScale = scaleTime()\n        .domain(extent(data, xValue))\n        .range([0, innerWidth])\n        .nice();\n\n    const [start, stop] = xScale.domain();\n\n    const binnedData = bin()\n        .value(xValue)\n        .domain(xScale.domain())\n        .thresholds(timeMonths(start, stop))(data)\n        .map(array => ({\n            y: sum(array, yValue),\n            x0: array.x0,\n            x1: array.x1\n        }))\n        .filter(d => d.y > 0); // Only keep bins where the count is > 0\n\n    const yScale = scaleLinear()\n        .domain([0, max(binnedData, d => d.y) || 0]) // Safeguard against empty data\n        .range([innerHeight, 0]);\n\n    const brushRef = useRef();\n\n    useEffect(() => {\n        const brush = brushX().extent([[0, 0], [innerWidth, innerHeight]]);\n        brush(select(brushRef.current));\n        brush.on('brush end', (event) => {\n            setBrushExtent(event.selection && event.selection.map(xScale.invert));\n        });\n    }, [innerWidth, innerHeight]);\n\n    return (\n        <>\n            <rect width={width} height={height} fill=\"white\" />\n            <g transform={`translate(${margin.left},${margin.top})`}>\n                <AxisBottom\n                    xScale={xScale}\n                    innerHeight={innerHeight}\n                    tickFormat={xAxisTickFormat}\n                    tickOffset={5}\n                />\n                <text\n                    className=\"axis-label\"\n                    textAnchor=\"middle\"\n                    transform={`translate(${-yAxisLabelOffset},${innerHeight / 2}) rotate(-90)`}\n                >\n                    {yAxisLabel}\n                </text>\n                <AxisLeft yScale={yScale} innerWidth={innerWidth} tickOffset={5} />\n                <text\n                    className=\"axis-label\"\n                    x={innerWidth / 2}\n                    y={innerHeight + xAxisLabelOffset}\n                    textAnchor=\"middle\"\n                >\n                    {xAxisLabel}\n                </text>\n                <Marks\n                    binnedData={binnedData}\n                    xScale={xScale}\n                    yScale={yScale}\n                    tooltipFormat={d => d}\n                    innerHeight={innerHeight}\n                />\n                <g ref={brushRef} />\n            </g>\n        </>\n    );\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}